{% extends 'base.html.twig' %}

{% block title %}Tax Years{% endblock %}

{% block body %}
    <h1 style="color: red">Tax Years</h1>

    <table class="table">
        <thead>
        <tr>
            <th style="width: 120px; text-align: left">Tax Year</th>
            <th style="width: 120px; text-align: right">Start_date</th>
            <th style="width: 120px; text-align: right">End_date</th>
            <th style="width: 120px; text-align: right">Tax Band 1 (Personal Allowance)</th>
            <th style="width: 120px; text-align: right">Tax Band 2 (Basic)</th>
            <th style="width: 120px; text-align: right">Tax Band 3 (Higher)</th>
            <th style="width: 120px; text-align: right">Tax Band 4 (Additional)</th>
            <th style="width: 120px; text-align: right">Tax Band 1 (Rate)</th>
            <th style="width: 120px; text-align: right">Tax Band 2 (Rate)</th>
            <th style="width: 120px; text-align: right">Tax Band 3 (Rate)</th>
            <th style="width: 120px; text-align: right">Tax Band 4 (Rate)</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% for tax_year in tax_years %}
            <tr>
                <td>
                    <a href="{{ path('tax_year_edit', {'id': tax_year.id}) }}">{{ tax_year.taxYearRange }}</a>
                </td>
                <td style="text-align: right">
                    {{ tax_year.startDate ? tax_year.startDate|date('d-M-Y') : '' }}
                </td>
                <td style="text-align: right">{{ tax_year.endDate ? tax_year.endDate|date('d-M-Y') : '' }}</td>
                <td style="text-align: right">{{ tax_year.taxBand1PersonalAllowance|number_format(0) }}</td>
                <td style="text-align: right">{{ tax_year.taxBand2BasicRate|number_format(0) }}</td>
                <td style="text-align: right">{{ tax_year.taxBand3HigherRate|number_format(0) }}</td>
                <td style="text-align: right">{{ tax_year.taxBand4AdditionalRate|number_format(0) }}</td>

                <td style="text-align: right">{{ tax_year.taxBand1Rate * 100 }} %</td>
                <td style="text-align: right">{{ tax_year.taxBand2Rate * 100 }} %</td>
                <td style="text-align: right">{{ tax_year.taxBand3Rate * 100 }} %</td>
                <td style="text-align: right">{{ tax_year.taxBand4Rate * 100 }} %</td>
                <td></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <a class="btn btn-success btn-sm mt-2" href="{{ path('tax_year_new') }}">New</a>
{% endblock %}

{% block datatable %}
    <script>
        $(document).ready(function () {
            $('.table').DataTable({
                'pageLength': 50,
                "order": [[0, 'asc']],
                "paging": false,
                "searching": false,
                "bInfo": false
            });
        });
    </script>
{% endblock datatable %}